# Abstract

Our project, Unconventional space, is about manipulation of the user’s perception of space to simulate non euclidean geometry. By forcing the player into unusual circumstances, such as seemingly infinite or warped spaces, the project delivers a unique and interesting experiences. Techniques used to create these abnormal situations included color swapping environments and moving points of reference instead of the player to create a false sense of movement, teleporting to connect otherwise far away locations, and gravitational shifts to alter the player’s freedom of movement.


# Introduction

This project is about manipulating aspects of the user’s vision and/or position in order to create a sense of warped reality. Each stage presents a seemingly impossible situation each with a unique solution requiring careful observation of one’s environment. The first level is a seemingly endless series of connected rooms. Each room the player walks into is a random color, appearing as a new area. Having this experience in VR gives movement a greater weight and makes each room feel like a new area that took time and effort to reach. The second level features an impassable hole in the ground between the player and the goal. In order to reach the goal, the player must fall into the hole, eventually falling all the way back where they started. In VR, having the FOV be entirely consumed by clouds can cause the player to lose their sense of direction and better simulate the feeling of falling. In the third level, a hallway with nothing but two green sphere lights appears to go on forever. However, VR encourages observation of the scene, and after glancing at each sphere for a short amount of time, the player finds the end of the hallway. The last level features the player on a giant sphere contained in a room. The sphere’s gravity holds the player away from the floor of the room. This causes the player perspective of the room to be solely from the surface of the sphere. VR allows for a greater feeling of up and down since the player must physically rotate their head up and down. This adds to the illusion that the player is suspended in the air on a sphere.


# Related Works 

Antichamber is a first-person puzzle-platform exploration game developed by Alexander "Demruth" Bruce. The game world consists of numerous levels that emphasizes use of perspective and non-linear map design by simulating non-euclidean geometry. The game's puzzles utilizes hidden passages, object manipulation and unconventional physics. The player is able to manipulate objects in the environment with a special gun. The player maneuvers themselves around the spaces, where level elements can change after passing certain points.
Our project is a first-person puzzle-platform exploration game that reconfigures the environment at certain stages of gameplay. In the first level of the game, the player is placed in space consisting of four rooms. As the player traverses each room, the room after next would change to a different color. By changing the color of certain rooms after passing certain rooms, the game is able to simulate non-euclidean geometry, ultimately presenting the illusion of a seemingly endless series of connected rooms. In the second level of the game, there is an impassable hole between the player and the goal. By discovering the hidden box hole from jumping into the impassable hole and falling from the sky, the player can enter the box hole and land on the goal. In the third level of the game, when the player reaches a certain position in the hallway, the player’s forward and backward movement physics are inhibited. To give the illusion that the player is still able to move, the green spheres on the walls move forward and backward inversely to the player’s forward and backward movement. In the fourth level of the game, the player’s gravity is chained to a floating sphere in a room. By adjusting the direction of the player’s downward velocity to the sphere’s core and rotating the player accordingly, the player is able to freely walk around the sphere. As soon as the player collides with the pole on the top of the sphere, the downward velocity and rotation restraints are disabled and the player can walk off the sphere and land on the room’s floor.
Our project  had similar methods to develop the puzzles. Our project utilized a non-linear map design by altering physics and rotation. It had a hidden passage that could only be revealed through certain stages in the level. Certain environment’s elements reconfigured itself at certain player positions. The player had no direct control of object manipulation such as a gun. By having an intervening medium between the player and the object manipulation in the environment such as looking directly at the green spheres in the second level or colliding with the floating sphere’s pole in the fourth level, the player is incentivized to explore the level and be mindful of the surroundings to solve the level. 

# Design 

We chose the Oculus Touch for positional control because we preferred the user to be standing rather than sitting to further the immersion of the player walking around the level. We chose the Oculus Headset for rotation control to further the immersion of the player looking around the level. The player controlled positional movement with the right hand joystick and controlled rotational movement with the Oculus Headset.

## Infinite Rooms

![Alt text](/images/image4.png?raw=true "Title")
![Alt text](/images/image6.png?raw=true "Title")

The Infinite Rooms level consisted of a space with four connected rooms. As the player traverses each room, the color of the room after the next would change. Because the rooms had simple and bright colors, the directional light’s brightness are dimmed to provide a more comfortable viewing experience. Because of the simplicity of the level’s environment and the requirement for competent hardware to run VR, the level can perform well in most technical conditions. Even though the color’s lighting are dimmed, players with eyes sensitive to light may experience discomfort. In order to develop a “infinite maze” in a fashion that would avoid complicated solutions and not hinder technical performance, we opted to simulate a non-euclidean environment by simply changing the color of the room after the next.

## Freefall

![Alt text](/images/image2.png?raw=true "Title")
![Alt text](/images/image8.png?raw=true "Title")

The Freefall level includes a large hallway with a walled off hole in the middle and a large gap separating the player and the goal. Large fog particles are used to obscure the players view while they are teleported from the bottom of the level to the top with the help of a trigger collider. Another trigger collider is positioned under the hole in the middle of the level. This trigger box teleports the player above the goal. In this level, the guidelines for locomotion are not followed. The player falls for a significant period of time. This is acceleration that is not initiated by the user’s real-world movement. In addition, the large amount of particles could potentially cause lag, breaking the guidelines of rendering. This level would perform best on a PC not under heavy load, as the scene relies heavily on particle effects. The worst conditions for this level would likewise be on a PC under heavy load, as the user would likely experience large drops in FPS. Any latency would also make the level highly uncomfortable.

## Endless Hallway

![Alt text](/images/image5.png?raw=true "Title")
![Alt text](/images/image7.png?raw=true "Title")

The Endless Hallway consists of a hallway, two fog particles, two trigger colliders, two green sphere lights, and the goal at the end of the hallway. The fog particles are positioned above and behind the player in order to limit their view distance. The colliders function to hold the player in place once they reach the center of the hallway. One prevents forward movement, one prevents backwards movement. The green sphere lights move the opposite direction of the player’s attempted movement in order to give the illusion that they are moving. If the player focuses their view on the green sphere lights for about a second each, the player will be allowed to pass onwards to the goal. The Endless Hallway level mainly breaks rendering lag guidelines. While less particles are being used than in the Freefall level, there are still a significant amount of particles being used to obscure the player’s view distance. This level would perform best under conditions where the player is walking on his own rather than with an analog stick, as it would add to the false sense of distance to the scene. Its worst conditions would be under low FPS, as the level relies heavily upon immersion in the scene.

## Planet

![Alt text](/images/image1.png?raw=true "Title")
![Alt text](/images/image3.png?raw=true "Title")

The Planet Level consisted of a sphere in a room. The sphere’s gravitational force constantly pulls the player to the sphere’s surface until the player collides with the pole on top of the sphere. Because of this spherical gravity, the guidelines for locomotion are not followed. While the player in reality is standing upwards, the player in the virtual reality could be standing on the bottom of the sphere, suspended. Furthermore, when the player deactivates the sphere’s gravitational pull, the player can walk off the sphere and fall for a significant period of time. This is also acceleration that is not initiated by the user’s real-world movement. Because the level’s environment is static and only involves a sphere and a black room, the player using a hardware appropriate for VR can expect to run this level smoothly. The only adjustments are the player’s gravity (rotational and velocity lock). 
Implementation 

The project was implemented with each scene representing a level. Each scene had a “LevelManager “ prefab that controlled level advancement, an unique “Level” that consisted of all the environment objects,  an unique “LevelGameMaster” that controlled the objects in “Level”,  and a “Player” prefab that parsed user input and allowed for rotational / positional movement. The “Level” contained a “Goal” prefab that notified the “LevelManager” that the level has been completed. The “Level” also contained multiple prefabs such as different rooms, walls, and floors as well as unique prefabs such as sphere lights  and a planet sphere that unique scripts that served to contribute to the presented illusion / puzzle.
All environment objects were developed entirely by us. In some of the parts of the scripts, the Unity Script Reference was used. The player positional movement script was developed with the help of the “CharacterController.Move” reference. The look detection for the sphere lights in the Hallway Level was developed with the help of the “Vector3.Dot” reference. The planet sphere’s gravity script was developed with the help of a Unity faux gravity tutorial.
The Planet Level went through many iterations in order to preserve a comfortable VR experience. In order to travel around the planet, the player’s downward velocity vector had to be opposite to the vector from the sphere’s core to the player. However, this resulted in jolted movement due to the constant velocity vector constraints. As a result, we utilized the Vector3.SmoothDamp function to the computation of the player’s downward velocity vector. This resulted in smoother movement and had no noticeable uncontrolled jerks/jolts. However, the player’s rotation was not altered with each movement. For example, when the player was at the bottom of the sphere, they would be standing on the sphere upside down (their head on the surface, their feet in the air). As a result, we changed the base rotational/directional vector of the player to be perpendicular to the vector from the sphere’s core to the player. Then we would read the player’s current euler’s angles and increment/decrement the rotational/directional vector accordingly. When the player collided with the pole on the sphere to disable the sphere’s gravitational pull, we removed the velocity and rotational constraints. However, if the player collided with the pole with the edge of their body or was not looking relatively perpendicular to the ground, the player’s yaw axis was adjusted in an awkward rotation. We have yet to find a solution for this bug.

“CharacterController.Move” https://docs.unity3d.com/ScriptReference/CharacterController.Move.html
“Vector3.Dot” 
https://docs.unity3d.com/ScriptReference/Vector3.Dot.html
Unity faux gravity tutorial
https://www.youtube.com/watch?v=gHeQ8Hr92P4

# Lessons Learned

Due to the time frame and workflow, we had to make many design decisions that affected our game. Early on we realized we would need to keep assets very simple and minimalist. In order to pull off visual illusions, environments needed consistency that wouldn’t be facilitated by fancy Unity Store assets. We also opted for separate levels as opposed to one large level. Ideas for new levels came at different phases of development, so level design for each idea needed to be independent of each other. Another issue we ran into is that for our infinite space puzzles, there needed to be a concrete starting point in order to be convincing to the user. If the user were simply in a location where they couldn't see what lies ahead or what’s behind them, then it wouldn’t even feel like the user was moving. In the Infinite Rooms level, the solution to this comes in the form of an initial wall behind the user and color changing walls. In the Endless Hallway level, there’s a similar functioning wall behind the player, as well as two green sphere lights to provide reference points.
	During the demo, users seemed convinced by the illusions of the endless space levels and intrigued by the mechanics of the rolling ball. On the other hand, they had difficulty finding solutions to most of the levels without guidance, didn’t like not being able to rotate with the left analog stick, and one user experienced slight nausea on the Free Fall level. If we could build on what we have, we would combine levels, so that each endless level is more than just finding a way out of a single illusion. We would also provide guidance through levels in the form of vague proverbs and program the left analog stick for rotation. To prevent nausea when falling, the gravity speed could be refined and the distance being fallen shortened. The experience could be further improved with immersive feedback, such as footsteps, or soundtracks upon entering different areas. The appearance of the project could also be improved through better lighting and slightly more sophisticated textures.
	The workload was mainly divided by level. By using prefabs and basic textures, a consistent structure and appearance was kept in each level. Each team member would work on the idea that they had for a level. After completing as many levels as we could, we decided as a team what order the levels should be played in.
